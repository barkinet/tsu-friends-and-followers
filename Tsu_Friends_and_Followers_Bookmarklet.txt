javascript:(function(){function e(){$("body.newsfeed").length?(p="home",m=".evac_user",g="body.newsfeed"):document.URL.endsWith("discover")?(p="discover",m="#discover .tree_child_fullname",g=""):$("#profile_feed").length?(p="diary",m=".evac_user",g="#profile_feed"):document.URL.endsWith("/friends")?(p="friends",m=".card .card_sub .info",g=".profiles_list"):document.URL.endsWith("/followers")?(p="followers",m=".card .card_sub .info",g=".profiles_list"):document.URL.endsWith("/following")?(p="following",m=".card .card_sub .info",g=".profiles_list"):(document.URL.contains("/messages/")||document.URL.endsWith("/messages"))&&(p="messages",m=".message_box .content",g=".messages_content")}function t(e){e&&confirm("Reload all Friend and Follower details of all users on the current page?")&&(c=[],u=[],$(".tff-span, .tff-br").remove(),$(".tff-processed").removeClass("tff-processed")),"discover"==p&&$("#discover .user_card_1_wrapper").each(function(){$currentUserLink=$(this).find(".tree_child_fullname");for(var e,t=$(this).find(".follow_button").attr("class").split(" "),n="follow_button_",r=t.length-1;r>=0;r--)if(n==t[r].slice(0,n.length)){e=t[r].substr(n.length);break}$currentUserLink.html($("<a/>",{href:"/users/"+e,html:$currentUserLink.html()}))}),$allUserLinks=$(m),$allUserLinks.each(function(){var e=$(this);if(!e.closest(".tooltipster-base").length){var t=e.attr("user_id");if("a"!=e.prop("tagName").toLowerCase()&&(e=e.find("a:first")),0!=e.length&&!e.hasClass("tff-processed")&&!e.siblings(".tff-span").length){var l=$("<span/>",{html:'<img class="tff-loader-wheel" src="/assets/loader.gif" title="Loading..." />',"class":"tff-span"});e.after(l),("friends"==p||"followers"==p||"following"==p||"discover"==p)&&l.before('<br class="tff-br" />');var a=e.text().trim(),d=e.attr("href");if(t="discover"==p?d.split("/")[2]:t||d.split("/")[1],i(t,!0))return f(t,l,0),void e.addClass("tff-processed");var c=o(t);return c instanceof n?(f(c,l,0),void e.addClass("tff-processed")):void $("<span/>").load(d+" .profile_details .numbers",function(n,i){if("success"==i){var o=$("a",this),c=$(o[0]),u=c.attr("href"),h=c.find("span").text(),p=$("<a/>",{title:"Friends",href:u,html:h}),m=$(o[1]),g=m.attr("href"),v=m.find("span").text(),_=$("<a/>",{title:"Followers",href:g,html:v});f(t,l),r(t,a,d,p,u,h,_,g,v),e.addClass("tff-processed")}else"error"==i&&$(this).html("n/a");s(t)})}}})}function n(e,t,n,r,i,s,o,f,l){this.userID=e.trim(),this.userName=t.trim(),this.userUrl=n.trim(),this.$friendsLink=r,this.friendsUrl=i.trim(),this.friendsCount=s.trim(),this.$followersLink=o,this.followersUrl=f.trim(),this.followersCount=l.trim(),this.getFriendsLink=function(){return this.$friendsLink.clone()},this.getFollowersLink=function(){return this.$followersLink.clone()}}function r(e,t,r,i,s,o,f,l,a){u.push(new n(e,t,r,i,s,o,f,l,a))}function i(e,t){for(var n=c.length-1;n>=0;n--)if(e==c[n])return!0;return t&&c.push(e),!1}function s(e){for(var t=c.length-1;t>=0;t--)if(e==c[t])return void delete c[t]}function o(e){for(var t=u.length-1;t>=0;t--)if(e==u[t].userID)return u[t];return!1}function f(e,t,r){(void 0===r||null===r)&&(r=0);var i;return e instanceof n?(i=e,e=i.userID):i=o(e),r>h?void t.remove():void(i instanceof n?t.empty().append(i.getFriendsLink(),i.getFollowersLink()):setTimeout(function(){f(e,t,r+1)},500))}function l(){if("discover"!=p)if("MutationObserver"in window){var e=document.querySelector(g);if(e){var t=new MutationObserver(function(e){for(var t=!1,n=e.length-1;n>=0;n--){var r=e[n].target.className;if(!r.contains("comment_time_from_now")&&!r.contains("time_to_update")){t=!0;break}}t&&_()});t.observe(e,{childList:!0,subtree:!0})}}else $.getScript("https://gist.github.com/raw/2625891/waitForKeyElements.js",function(){waitForKeyElements(m,_)})}function a(){$("<style>").html(".tff-span a{font-size:smaller;margin-left:5px;border-radius:3px;background-color:#1ABC9C;color:#fff !important;padding: 2px 4px 0;}.tff-span .tff-loader-wheel{margin-left:5px;height:12px;}.user_card_1_wrapper .tree_child_fullname{height:32px !important;}").appendTo("head")}function d(){if(0==$("#tff-menuitem-load-friends-and-followers").length){var e=$("<a/>",{html:"Load Friends and Followers"});e.click(function(){t(!0)});var n=$("<li/>",{id:"tff-menuitem-load-friends-and-followers",html:e});$("#navBarHead .sub_nav").append(n)}}a();var c=[],u=[],h=3e3;d(),setTimeout(function(){e(),l()},500),setTimeout(function(){t()},1500);var p,m,g,v=!1,_=function(){v||(t(),setTimeout(function(){v=!1},2e3)),v=!0};"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)==e}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return this.slice(-e.length)==e}),"function"!=typeof String.prototype.contains&&(String.prototype.contains=function(e){return this.indexOf(e)>=0})})();